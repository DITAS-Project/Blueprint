{
   "$schema":"http://json-schema.org/draft-06/schema#",
   "type":"object",
   "description":"This is a VDC Blueprint which consists of five sections and a UUID",
   "properties":{
      "UUID":{
         "type":"string",
         "description":"The UUID will be filled by the system"
      },
      "Internal_Structure":{
         "type":"object",
         "description":"General information about the VDC Blueprint",
         "properties":{
            "overview":{
               "type":"object",
               "properties":{
                  "name":{
                     "type":"string",
                     "description":"This field should contain the name of the VDC Blueprint",
                     "example":"Data for weather forecast in Europe"
                  },
                  "description":{
                     "type":"string",
                     "description":"This field should contain a short description of the VDC Blueprint"
                  },
                  "topic":{
                     "enum":[
                        "Agriculture",
                        "Development",
                        "Economy",
                        "Education",
                        "Energy",
                        "Environment",
                        "Finance",
                        "Government",
                        "Health",
                        "Innovation and Technology",
                        "Jobs",
                        "Society",
                        "Weather"
                     ],
                     "description":"This field should contain one of the values included in the enum array, we will update the categories whenever we define them"
                  },
                  "keywords":{
                     "type":"array",
                     "description":"This field should contain some keywords that describe the VDC Blueprint",
                     "items":{
                        "type":"string"
                     },
                     "minItems":1,
                     "uniqueItems":true
                  }
               },
               "additionalProperties":false,
               "required":[
                  "name",
                  "description",
                  "topic",
                  "keywords"
               ]
            },
            "data_sources":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "name":{
                        "type":"string",
                        "description":"An explanation about the purpose of this instance.",
                        "examples":[
                           "MinioDS1"
                        ]
                     },
                     "type":{
                        "type":"string",
                        "description":"An explanation about the purpose of this instance.",
                        "examples":[
                           "sql"
                        ]
                     },
                     "parameters":{
                        "type":"object"
                     }
                  }
               },
               "minItems":1,
               "uniqueItems":true
            },
            "flow":{
               "type":"object",
               "description":"The Node-RED flow that implements the VDC",
               "properties":{
                  "platform":{
                     "enum":[
                        "NodeRED"
                     ],
                     "description":"The name of the platform for the flow"
                  },
                  "source_code":{

                  }
               },
               "additionalProperties":false,
               "required":[
                  "platform",
                  "source_code"
               ]
            },
            "testing_output_data":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "method_name":{
                        "type":"string"
                     },
                     "data":{

                     }
                  },
                  "additionalProperties":false,
                  "required":[
                     "method_name",
                     "data"
                  ]
               },
               "uniqueItems":true
            }
         },
         "additionalProperties":false,
         "required":[
            "overview",
            "data_sources",
            "flow"
         ]
      },
      "Data_Management":{
         "type":"object",
         "properties":{
            "Data_Utility":{
               "type":"object",
               "properties":{
                  "availability":{
                     "type":"number",
                     "minimum":0,
                     "maximum":1,
                     "exclusiveMaximum":true,
                     "details":{

                     }
                  },
                  "response_time":{
                     "type":"number",
                     "description":"the unit time is in milliseconds",
                     "minimum":0,
                     "exclusiveMinimum":true,
                     "details":{

                     }
                  },
                  "data_volume":{
                     "type":"integer",
                     "description":"number of tuples",
                     "minimum":0,
                     "details":{

                     }
                  },
                  "timeliness":{
                     "type":"number",
                     "maximum":0.6,
                     "details":{

                     }
                  },
                  "process_completeness":{
                     "type":"number",
                     "minimum":0,
                     "maximum":1,
                     "exclusiveMinimum":true,
                     "details":{

                     }
                  },
                  "throughput":{
                     "type":"number",
                     "description":"the unit is Mbit/s",
                     "minimum":0,
                     "details":{

                     }
                  },
                  "error_counts":{
                     "type":"integer",
                     "minimum":0,
                     "details":{

                     }
                  }
               }
            },
            "Security":{

            },
            "required":[
               "Data_Utility",
               "Security"
            ]
         }
      },
      "Abstract_Properties":{
         "type":"object",
         "properties":{
            "Product_Properties":{
               "type":"object",
               "properties":{
                  "data_administrator_reputation":{
                     "type":"integer",
                     "description":"The data administrator reputation will be filled by the system",
                     "minimum":0,
                     "maximum":5,
                     "exclusiveMinimum":true
                  },
                  "vdc_blueprint_popularity":{
                     "type":"integer",
                     "description":"The popularity will be filled by the system",
                     "minimum":0,
                     "maximum":5,
                     "exclusiveMinimum":true
                  },
                  "vdc_blueprint_rating":{
                     "type":"integer",
                     "description":"The VDC Blueprint rating will be filled by the system",
                     "minimum":0,
                     "maximum":5,
                     "exclusiveMinimum":true
                  },
                  "price":{
                     "type":"array",
                     "description":"This field should contain the price of the VDC Blueprint",
                     "items":{
                        "type":"object",
                        "properties":{
                           "lower_limit":{
                              "type":"integer",
                              "minimum":0
                           },
                           "upper_limit":{
                              "type":"integer"
                           },
                           "price":{
                              "type":"number",
                              "minimum":0
                           }
                        },
                        "required":[
                           "lower_limit",
                           "upper_limit",
                           "price"
                        ]
                     },
                     "minItems":1,
                     "uniqueItems":true
                  }
               },
               "required":[
                  "price"
               ]
            },
            "Quality_Properties":{
               "type":"object",
               "properties":{
                  "scalability":{
                     "type":"boolean"
                  },
                  "elasticity":{
                     "type":"boolean"
                  }
               },
               "required":[
                  "scalability",
                  "elasticity"
               ]
            },
            "required":[
               "Product_Properties",
               "Quality_Properties"
            ]
         }
      },
      "Cookbook_Appendix":{

      },
      "Exposed_API":{
         "title":"CAF API",
         "description":"The CAF API",
         "type":"object",
         "properties":{
            "methods":{
               "type":"array",
               "items":{
                  "title":"An exposed VDC method",
                  "type":"object",
                  "properties":{
                     "name":{
                        "type":"string"
                     },
                     "description":{
                        "type":"string"
                     },
                     "attributes":{
                        "type":"array",
                        "items":[
                           {
                              "enum":[
                                 "purpose"
                              ]
                           },
                           {
                              "enum":[
                                 "requester_id"
                              ]
                           }
                        ],
                        "minItems":2,
                        "uniqueItems":true
                     },
                     "HTTP_REST_API":{
                        "type":"object",
                        "properties":{
                           "Method":{
                              "enum":[
                                 "POST",
                                 "GET",
                                 "PUT",
                                 "PATCH",
                                 "DELETE",
                                 "HEAD"
                              ]
                           },
                           "Body":{
                              "type":"object",
                              "properties":{
                                 "method_name":{
                                    "type":"string"
                                 },
                                 "attributes":{
                                    "description":"The JSON schema of the attributes of the exposed VDC method, written according to the draft-06 specification",
                                    "type":"object",
                                    "properties":{
                                       "type":{
                                          "enum":[
                                             "object"
                                          ]
                                       },
                                       "properties":{
                                          "type":"object",
                                          "properties":{
                                             "purpose":{
                                                "type":"object",
                                                "properties":{
                                                   "type":{
                                                      "enum":[
                                                         "string"
                                                      ]
                                                   }
                                                },
                                                "required":[
                                                   "type"
                                                ]
                                             },
                                             "requester_id":{
                                                "type":"object",
                                                "properties":{
                                                   "type":{
                                                      "enum":[
                                                         "string"
                                                      ]
                                                   }
                                                },
                                                "required":[
                                                   "type"
                                                ]
                                             }
                                          },
                                          "required":[
                                             "purpose",
                                             "requester_id"
                                          ]
                                       },
                                       "required":{
                                          "type":"array",
                                          "items":[
                                             {
                                                "enum":[
                                                   "purpose"
                                                ]
                                             },
                                             {
                                                "enum":[
                                                   "requester_id"
                                                ]
                                             }
                                          ],
                                          "minItems":2,
                                          "uniqueItems":true
                                       }
                                    },
                                    "required":[
                                       "type",
                                       "properties",
                                       "required"
                                    ]
                                 },
                                 "example":{
                                    "description":"A body example of an HTTP request to the exposed VDC method",
                                    "type":"object"
                                 }
                              },
                              "additionalProperties":false,
                              "required":[
                                 "method_name",
                                 "attributes"
                              ]
                           },
                           "Headers":{
                              "type":"array",
                              "items":{
                                 "title":"An HTTP request header of the exposed VDC method",
                                 "type":"object"
                              },
                              "uniqueItems":true
                           }
                        },
                        "additionalProperties":false,
                        "required":[
                           "Method",
                           "Body",
                           "Headers"
                        ]
                     },
                     "output_schema":{
                        "description":"The output JSON schema of the exposed VDC method, written according to the draft-06 specification",
                        "type":"object"
                     }
                  },
                  "additionalProperties":false,
                  "required":[
                     "name",
                     "description",
                     "attributes",
                     "HTTP_REST_API",
                     "output_schema"
                  ]
               },
               "minItems":1,
               "uniqueItems":true
            }
         },
         "additionalProperties":false,
         "required":[
            "methods"
         ]
      }
   },
   "required":[
      "UUID",
      "Internal_Structure",
      "Data_Management",
      "Abstract_Properties",
      "Cookbook_Appendix",
      "Exposed_API"
   ],
   "additionalProperties":false
}